**Экспериментальные оценки**

Практическая применимость разработанной библиотеки llvm2py далее рассмотрена на примере использования инструмента анализа степени распараллеливания линейных участков, созданного на языке Python. Для тестирования выбраны реализации десяти известных алгоритмов на языке C.

Тестовые программы были переведены в форму LLVM IR с использованием компилятора clang 16 и следующих опций:

\vspace{0.6cm}
\begin{center}

clang -O2 -S -emit-llvm -funroll-loops -finline-functions.

\end{center}
\vspace{0.6cm}

Для каждой программы произведён статический анализ с использованием разработанного инструмента на
платформе сервиса Goo le Colab с двумя выделенными ядрами процессора Intel Xeon.

Время, затраченное на анализ каждой программы приведено в табл. 1.

Как видно из таблицы, анализ степени распараллеливания линейных участков занял приемлемое время, несмотря на использование языка Python и решение NP-трудной задачи нахождения минимальной ЯПФ.

В случае тестов Blowfish и ZIP, разительно отличающихся друг от друга количеством линейных участков,
можно видеть, что размер линейного участка оказывает существенное влияние на общее время анализа.

С использованием полученных результатов анализа для каждой программы был выбран единственный линейный участок с наибольшим коэффициентом ускорения. 

Данные по каждому выбранному участку приведены в табл. 2.

\setlength{\parindent}{0pt}
\vspace{0.4cm}

\begin{flushright}
Таблица 1 – Общее время анализа программ
\end{flushright}

\begin{tabular}{|p{2.5cm}|p{3.2cm}|p{3cm}|p{3.7cm}|p{3cm}|}
    
  \hline  
  Программа & Размер программы, команд & Количество линейных участков & Средний размер линейного участка, команд & Общее время анализа, с \\
  \hline
  Blowfish & 980 & 4 & 245 & 42.69 \\
  \hline
  ZIP & 11446 & 2666 & 4 & 37.2 \\
  \hline
  JPEG & 1416 & 223 & 6 & 6.09 \\
  \hline
  AES & 126 & 2 & 63 & 1.14 \\
  \hline
  Base64 & 367 & 117 & 3 & 0.96 \\
  \hline
  ChaCha20 & 146 & 3 & 48 & 0.49 \\
  \hline
  SHA1 & 198 & 19 & 10 & 0.48 \\
  \hline
  CSV & 240 & 92 & 2 & 0.43 \\
  \hline
  SHA256 & 133 & 14 & 9 & 0.26 \\
  \hline
  MD5 & 55 & 10 & 5 & 0.18 \\
  \hline
\end{tabular}

\vspace{0.2cm}

\begin{flushright}
Таблица 2 – Выбранные линейные участки программ
\end{flushright}

\begin{tabular}{|p{5.3cm}|p{5.7cm}|p{5.3cm}|}

  \hline  
  Программа & Линейный участок в формате
функция.%номер & Количество команд линейного
участка \\
  \hline
  AES & main.\%125 & 114 \\
  \hline
  
  ChaCha20 & main.\%33 & 98 \\
  \hline
  JPEG & njDecode.\%776 & 54 \\
  \hline
  Base64 & base64\_encode.\%22 & 49 \\
  \hline
  Blowfish & blowfish\_key\_setup.\%6 & 32 \\
  \hline
  SHA256 & sha256\_transform.\%79 & 31 \\
  \hline
  MD5 & md5\_transform.\%4 & 26 \\
  \hline
  SHA1 & sha1\_transform.\%4 & 26 \\
  \hline
  ZIP & tdefl\_compress\_normal.\%1 & 24 \\
  \hline
  CSV & CsvReadNextRow.\%62 & 16 \\
  \hline
  
\end{tabular}

\setlength{\parindent}{15pt}

Значения ширины ЯПФ до и после минимизации, а также коэффициенты ускорения для выбранных линейных участков из табл. 2 приведены в диаграммах на @fig:make5.

\vspace{7.5cm}

![Статистика распараллеливания линейных участков, приведённых в табл. 2](./images/png5.png){#fig:make5 width="5.8in"}

На левой диаграмме приведены полученные для линейных участков тестовых программ коэффициенты ускорения a. Самым распараллеливаемым оказался линейный участок программы JPEG, в то время как линейные
участки MD5 и Blow ish подвержены распараллеливанию в меньшей степени, чем линейный участок AES. Правая диаграмма показывает разницу между наибольшей шириной яруса w первоначального варианта ЯПФ и варианта с минимизированной шириной. Видно, в частности, что благодаря нахождению минимальной ЯПФ удаётся сэкономить 17 функциональных узлов для теста AES.

В разработанном инструменте анализа степени распараллеливания присутствуют средства визуализации
ЯПФ. Пример минимальной ЯПФ для линейного участка алгоритма JPEG приведен на @fig:make6 Для сокращения
деталей в аргументах линейного участка убраны индексы, а результаты не отображены.

![Минимальная ЯПФ линейного участка JPEG](./images/png6.png){#fig:make6 width="5.7in"}

Как видно из рис. 6, линейный участок состоит только из вычислительных команд и обладает большим потенциалом распараллеливания, то есть может быть рассмотрен вопрос о переносе выполнения части кода JPEG
на специализированную архитектуру с параллелизмом уровня команд. При этом необходимо учесть также информацию от профилировщика по поводу частоты выполнения анализируемых линейных участков в программе.